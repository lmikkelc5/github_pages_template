---
title: "My Blog"
---

# Stats and the diversification of risk

## What is Diversification of risk?
Diversification of risk is the idea that as you 'put your eggs in more baskets' you minimize the overall risk. This is generally discussed within the investing community as a way to minimize the risk of losing large portions of your money. This principle is widely used and understood but I would like to look at the statistics behind it to gain a better understanding.

## The Idea
The idea behind this is that as you increase the number of investments the chances of more then one dropping significatly decreases drastically. If one of your stocks move down signifiactly, say 25% but it only makes up 5% of your portfolio then you only end up losing 1.25% of your total portfolio value which is a much more manageable portion. This also increases the chance of one of your stocks moving up a significant amount. While diversification does minimize the return you would receive from an increase it increases the chances of you gaining some value in your portfolio. What is does is take your portfolio risk and minimize it. You are stuck with something called Market risk but diversification gets rid of most of your portfolio specific risk.

![A graph showing market risk vs portfolio risk](..\imgs\chart.png)


## The Maths
Below is a chunk of code that visualizes the affect of adding a position to your portfolio.

Copy this code and change the max_positions variable to see a different number of variables. 

The graph is for a portfolio size of $10000 with 50 positions.
<br>
```{python}
import numpy as np
import matplotlib.pyplot as plt

#Parameters you can change
portfolio_size = 100_000
avg_return = 0.07
volatility = 0.20
correlation = 0.1
max_positions = 50
simulations = 10_000

def simulate_portfolio(num_positions):
    weights = np.ones(num_positions) / num_positions
    
    # covariance matrix
    cov_matrix = (volatility**2) * (
        correlation * np.ones((num_positions, num_positions)) +
        (1 - correlation) * np.eye(num_positions)
    )
    
    # portfolio variance
    port_variance = weights @ cov_matrix @ weights.T
    port_std_dev = np.sqrt(port_variance)
    
    return port_std_dev

#simulations
positions_range = range(1, max_positions+1)
risks = [simulate_portfolio(n) for n in positions_range]

# plot it
plt.figure(figsize=(8,5))
plt.plot(positions_range, risks, marker="o")
plt.title("Portfolio Risk vs. Number of Positions")
plt.xlabel("Number of Positions")
plt.ylabel("Portfolio Risk (Std Dev)")
plt.grid(True)
plt.show()

```

### The Sharpe Ratio
One measure of risk isThe Sharpe Ratio is a mathmatical formula used to measure risk against the expected return.

$R_p$ = The porfolios return  
$R_f$ = Risk free rate  
$\sigma_p$ = Standard Deviation of the portfolios excess return  

$$
The Sharpe Ratio = (R_p - R_f)/\sigma_p
$$
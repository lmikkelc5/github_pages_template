---
title: "My Blog"
---

# Stats and the diversification of risk

## What is Diversification of risk?
Diversification of risk is the idea that as you 'put your eggs in more baskets' you minimize the overall risk. This is generally discussed within the investing community as a way to minimize the risk of losing large portions of your money. This principle is widely used and understood but I would like to look at the statistics behind it to gain a better understanding.

## The Idea
The idea behind this is that as you increase the number of investments the chances of more then one dropping significatly decreases drastically. If one of your stocks move down signifiactly, say 25% but it only makes up 5% of your portfolio then you only end up losing 1.25% of your total portfolio value which is a much more manageable portion. This also increases the chance of one of your stocks moving up a significant amount. While diversification does minimize the return you would receive from an increase it increases the chances of you gaining some value in your portfolio. What is does is take your portfolio risk and minimize it. You are stuck with something called Market risk but diversification gets rid of most of your portfolio specific risk.

![A graph showing market risk vs portfolio risk](..\imgs\chart.png)


## The Maths
To start I am going to lay out an example for us to demonstrate this principle. 

Without diversification
<br>
```{python}
import numpy as np
import matplotlib.pyplot as plt

#Parameters to change
portfolio_size = 100000
num_positions = 20
avg_return = 0.07
volatility = .20
simulations = 10000

#Simulate returns
weights = np.ones(num_positions)/num_positions
returns = np.random.normal(avg_return, volatility, (simulations, num_positions))
portfolio_returns = (returns @ weights) * portfolio_size

#Results
mean_return = np.mean(portfolio_returns)/portfolio_size
stan_dev = np.std(portfolio_returns)/portfolio_size

print(f"The mean return for the portfolios is {mean_return}")
print(f"The standard deviation for the portfolios is {stan_dev}")

#plot the results
plt.hist(portfolio_returns/portfolio_size, bins=50, alpha=0.7, color="black")
plt.axvline(mean_return, color="red", linestyle="dashed", linewidth=2, label="Mean")
plt.title(f"Distribution of Portfolio Returns ({num_positions} positions)")
plt.xlabel("Return")
plt.ylabel("Frequency")
plt.legend()
plt.show()

```

With diversification <br>
```{python}

```

### The Sharpe Ratio
The Sharpe Ratio is a mathmatical formula used to measure risk against the expected return.

$R_p$ = The porfolios return  
$R_f$ = Risk free rate  
$\sigma_p$ = Standard Deviation of the portfolios excess return  

$$
The Sharpe Ratio = (R_p - R_f)/\sigma_p
$$